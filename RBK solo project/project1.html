<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <title>TODO List</title>
    <script src='https://code.jquery.com/jquery-2.2.4.js'></script>
    <link rel="stylesheet" href="project1.css">
    <script src="https://kit.fontawesome.com/a81368914c.js"></script>
</head>
<body>


    </div>
    <h1><span class="title">Todo</span>List</h1>
    <div class='back'><button class="comeBack"><i class="fas fa-arrow-circle-left"></i></button></div>
    <div class="inputDiv">
           <input type="text" id="input" placeholder="What Do You Want to Do...">
           <button id="add"><i class="fas fa-plus-circle"></i></button>
    </div>
    <center><div class="container">
        <h2 class='inContainer'>Incomplete</h2>
        <div class='Incomplete'>
        
    </div>

    </div></center>

    <div class='footer'>
        <button class="footer"><i class="fas fa-trash-alt"></i></button>
        <p color: red>Click to delete the list</p>
    </div>




    <script>

        if($('li').text === undefined || $('li').text === ""){
        $('.container').hide()
        }


        $('#add').click(function() {
            $('.container').show()
            var input = $('#input').val()

            if(input.length > 3) {
                $('.Incomplete').append('<h4><li>' + input +'</li><h4>')
            }
            $('#input').val('')
        })

        $('.comeBack').click(function() { // to sign off and go back to the sign in page
            $('.href').html('')
            $('.back').append('<a class="href" href="project.html"><strong>Do you want to log OFF !?</strong></a>')
        })
        // LocalStorage
        let todos = localStorage.getItem('todos') ? JSON.parse(localStorage.getItem('todos')) : [];

        localStorage

        const addtodo = (ev)=>{
            ev.preventDefault();  //to stop  from submitting when case is empty (event)
            var todo = {
                todo: $('li').last().text()  // get value only of the last li added into the local storage
            }
            todos.push(todo);
            //$('li').text('') 
            localStorage.setItem('todos', JSON.stringify(todos) );  //when passed a key name and value, will add that key to the 
                                                                   //given  Storage object, or update that key's value if it already exists.
        }
        document.addEventListener('DOMContentLoaded', ()=>{
            document.getElementById('add').addEventListener('click', addtodo);
        });

            for(var z = 0; z < todos.length; z++) {         // to get the added todos when page is refreshed
                $('.Incomplete').append('<h4><li>' +todos[z]['todo'] + '</li></h4>')
            }


        $('.footer').click(function() {
            $('.Incomplete').html('')
            localStorage.removeItem('todos')          // remove targeted imtem from local storage (by key)
            $('.container').hide()   
            todos = []                              // in this case the key is our array : todos
            //localStorage.clear()                 // clear all the local storage
        })




    </script>
</body>
</html>